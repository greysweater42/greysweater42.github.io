<!DOCTYPE html>
<html lang="en">
<head>

  <title>greysweater42&#39;s cookbook</title>
  <link rel="shortcut icon" type='image/x-icon' href="https://greysweater42.github.io/favicon.ico"/> 

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link href="https://fonts.googleapis.com/css?family=Ubuntu&display=swap" rel="stylesheet">        
  <link href="https://fonts.googleapis.com/css?family=Ubuntu+Mono&display=swap" rel="stylesheet">

  <link href="https://fonts.googleapis.com/css?family=Fascinate&display=swap" rel="stylesheet">

  
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">

  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.css" integrity="sha384-yFRtMMDnQtDRO8rLpMIKrtPCD5jdktao2TV19YiZYWMDkUR5GQZR/NOVTdquEx1j" crossorigin="anonymous">
  
  
  <link rel="stylesheet" href="https://greysweater42.github.io/css/bootstrap-toc.css">

  
  <link rel="stylesheet" href="https://greysweater42.github.io/css/darcula.css">

  
  <link rel="stylesheet" href="https://greysweater42.github.io/css/style.css">

  
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-NNMCY8RRGL"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-NNMCY8RRGL');
  </script>

</head>


<body data-spy="scroll" data-target="#toc">



<nav id="navbar" class="navbar navbar-expand-md fixed-top navbar-hide transition">

  
  <a class="navbar-brand"></a>

  <button class="navbar-toggler float-xs-right" data-toggle="collapse" data-target="#collapsibleNavbar">
    Menu
  </button>

  <div class="collapse navbar-collapse" id="collapsibleNavbar">

    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" href="https://greysweater42.github.io">Home</a>
      </li>
      
      
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" data-toggle="dropdown">Python</a>
        <div class="dropdown-menu scrollable-menu">
          
            <a class="dropdown-item" href="https://greysweater42.github.io/airflow/">airflow</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/async_thread/">async/threads</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/beautiful_soup/">beautiful soup</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/decorators/">decorators</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/fastai/">fastai</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/flask/">flask</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/ggplot2/">ggplot2</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/keras/">keras</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/learning_tensorflow/">learning tensorflow</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/logging/">logging</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/pandas/">pandas</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/pillow/">pillow</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/pyenv/">pyenv, virtualenv, freeze</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/pytorch/">pytorch</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/pytorch_basics/">pytorch basics</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/spark/">spark</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/sqlalchemy/">sqlAlchemy</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/tensorflow/">tensorflow</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/testing/">testing</a>
          
        </div>
      </li>
    
      
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" data-toggle="dropdown">R</a>
        <div class="dropdown-menu scrollable-menu">
          
            <a class="dropdown-item" href="https://greysweater42.github.io/cinr/">C in R</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/classess4/">classes - S4</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/data.table/">data.table</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/debugging/">debugging</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/decision_trees/">decision trees</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/ggplot2/">ggplot2</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/logging/">logging</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/lubridate/">lubridate</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/nls/">nls</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/packages/">packages</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/rcpp/">Rcpp</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/reshape2/">reshape2</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/rmariadb/">RMariaDB (former RMySQL)</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/rocker/">rocker</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/rstanarm/">rstanarm</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/rtags/">rTags</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/shiny/">shiny</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/spark/">spark</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/sqldf/">sqldf</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/testing/">testing</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/tidyverse/">tidyverse</a>
          
        </div>
      </li>
    
      
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" data-toggle="dropdown">Machine learning</a>
        <div class="dropdown-menu scrollable-menu">
          
            <a class="dropdown-item" href="https://greysweater42.github.io/ml/">basic machine learning algorithms</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/bayes/">bayes</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/bias_variance/">bias/variance trade-off</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/cnns/">CNNs</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/decision_trees/">decision trees</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/fastai/">fastai</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/keras/">keras</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/learning_tensorflow/">learning tensorflow</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/validation/">model validation</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/nlp/">nlp</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/nls/">nls</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/pca/">PCA / SVD</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/pillow/">pillow</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/pytorch/">pytorch</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/pytorch_basics/">pytorch basics</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/tensorflow/">tensorflow</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/useful_processing/">useful processing</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/xai/">XAI</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/xgboost/">xgboost</a>
          
        </div>
      </li>
    
      
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" data-toggle="dropdown">Data engineering</a>
        <div class="dropdown-menu scrollable-menu">
          
            <a class="dropdown-item" href="https://greysweater42.github.io/airflow/">airflow</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/async_thread/">async/threads</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/hadoop/">hadoop</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/logging/">logging</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/pandas/">pandas</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/spark/">spark</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/useful_processing/">useful processing</a>
          
        </div>
      </li>
    
      
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" data-toggle="dropdown">DevOps</a>
        <div class="dropdown-menu scrollable-menu">
          
            <a class="dropdown-item" href="https://greysweater42.github.io/bash/">bash</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/docker/">docker</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/flask/">flask</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/git/">git</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/heroku/">heroku</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/kubernetes/">Kubernetes</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/mesos/">mesos</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/pyenv/">pyenv, virtualenv, freeze</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/rocker/">rocker</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/vagrant/">vagrant</a>
          
        </div>
      </li>
    
      
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" data-toggle="dropdown">Projects</a>
        <div class="dropdown-menu scrollable-menu">
          
            <a class="dropdown-item" href="https://greysweater42.github.io/fiat_ferrari/">fiat 126 v ferrari</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/finance_nn/">neural networks vs stock market</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/reading_mate/">reading mate</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/vim_vs_emacs/">vim vs emacs - text mining to settle the editor war</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/cookbook/">writing a cookbook</a>
          
        </div>
      </li>
    
      
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" data-toggle="dropdown">scratchpad</a>
        <div class="dropdown-menu scrollable-menu">
          
            <a class="dropdown-item" href="https://greysweater42.github.io/passing_arguments/">passing arguments to scripts</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/redis/">redis</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/tensorflow_serving/">tensorflow_serving</a>
          
        </div>
      </li>
    
    </ul>

  </div>  

</nav>



<div class="jumbotron text-center" id="header">

  <div id="header-title">
      <a href="https://greysweater42.github.io">greysweater42&#39;s cookbook</a>
  </div>

  <p style="color: white;">data science tutorials and snippets prepared by greysweater42</p> 

</div>


<nav id="toc" data-toggle="toc" class="sticky-top d-none d-xl-block"></nav>

<div class="article">

<div class="article-categories">
  
    <object style="vertical-align:middle" type="image/svg+xml" data="/folder.svg" height="15px" width="15px"></object> 
    <a href="https://greysweater42.github.io/categories/projects" role="button">projects </a>
    &emsp;
  </br>
</div>
<div class="article-title">
  
  favourite pet?

</div>
<div class="article-info">
    Oct 13, 2021 &emsp;  &emsp; 5 minutes read
</div>

<h2 id="1-what-am-i-doing">1. What am I doing?</h2>
<p>I&rsquo;m trying to find out if you can tell if a person is talking about their <em>Python</em> or <em>dog</em>, when the person does not use any of the words &ldquo;python&rdquo; or &ldquo;dog&rdquo;.</p>
<p>Apart from being funny for me, I want to practice creating and learning RNNs, LSTMs in particular.</p>
<h2 id="2-dataset">2. Dataset</h2>
<p>is taken from reddit, because of its simple API. This time <a href="https://praw.readthedocs.io/en/stable/">praw</a>, which is an excellent python package for downloading any information/data from reddit was not enough, as it allows to get only 1000 posts at a time. For this project I needed more, so I used <a href="https://psaw.readthedocs.io/en/latest/">psaw</a>, which may work as a thin wrapper around <code>praw</code> and does not have such constraint.</p>
<p>Here&rsquo;s the code that I used to download the data:</p>
<pre><code class="language-{python}" data-lang="{python}">import praw
import pandas as pd
import json
from pathlib import Path
from tqdm import tqdm
from psaw import PushshiftAPI


# reading reddit credentials
reddit_creds_path = Path.home() / &quot;cookbook&quot; / &quot;scratchpad&quot; / &quot;rnn&quot; / &quot;creds.json&quot;
with open(reddit_creds_path, &quot;r&quot;) as f:
    reddit_creds = json.load(f)

# setting up a connection
reddit = praw.Reddit(
    client_id=reddit_creds[&quot;client_id&quot;],
    client_secret=reddit_creds[&quot;client_secret&quot;],
    user_agent=&quot;python_or_dog&quot;,
    username=reddit_creds[&quot;username&quot;],
    password=reddit_creds[&quot;password&quot;],
)
api = PushshiftAPI(reddit)

# a function for downloading posts
def get_data(api, subreddit_name):
    submissions = api.search_submissions(limit=10000, subreddit=subreddit_name)
    bodies = []
    for submission in tqdm(submissions, total=10000):
        bodies.append(submission.selftext)
    topics_data = pd.DataFrame(dict(body=bodies, label=subreddit_name))
    return topics_data


# downloading posts
all_posts = dict()
for pet in [&quot;dogs&quot;, &quot;Python&quot;]:
    raw_data = get_data(api, subreddit_name=pet)
    all_posts[pet] = raw_data[raw_data[&quot;body&quot;].str.len() &gt; 200]
    print(&quot;downloading {} finished&quot;.format(pet))
    del raw_data  # save some memory

# saving results
result = pd.concat(all_posts.values())
save_path = Path.home() / &quot;cookbook&quot; / &quot;scratchpad&quot; / &quot;rnn&quot;
result.to_csv(save_path / &quot;posts_reddit.csv&quot;, index=False)
</code></pre><p>I&rsquo;ve decided to filter out those posts, which were shorter than 200 characters, as they probably do not convey enough information for the neural network.</p>
<h2 id="3-network">3. Network</h2>
<h3 id="why-keras-not-pytorch">Why keras, not pytorch?</h3>
<p>This time I used <a href="https://greysweater42.github.io/keras">keras</a> for creating and learning an LSTM network. I tried to use pytorch as well, but the library for working with text in pytorch is called <a href="https://pytorch.org/text/stable/index.html">torchtext</a> and is nowhere near as good as other pytorch add-ons like torchvision, for several reasons:</p>
<ul>
<li>
<p>if you deal with a huge amount of data, which is often the case, you have to write your own generator as a sublass of data loader (which is not very difficult, but works exactly the same for every project, so could be provided by the package), while torchvision already has it;</p>
</li>
<li>
<p>the API for datasets which fit into memory, e.g. stored in csv files, has a rather non-intuitive syntax: you have to define each column of the csv file and provide it to the data reader (<code>fields</code> argument):</p>
</li>
</ul>
<pre><code class="language-{python}" data-lang="{python}"># dataset
LABEL = data.LabelField()
POST = data.Field(tokenize=&quot;spacy&quot;, lower=True, tokenizer_language=&quot;en_core_web_sm&quot;)
fields = [(&quot;body&quot;, POST), (&quot;label&quot;, LABEL)]
dataset = data.TabularDataset(path=&quot;pytorch_data.csv&quot;, format=&quot;CSV&quot;, fields=fields)
train, test = dataset.split(split_ratio=[0.8, 0.2])
</code></pre><p>where it is not obvious how the data is stored. <code>torchtext</code> for each observation uses an object of class Example, which consists of two (or more) objects of class Example: text and label, which I find rather counter-intuituve. For my purpose, which is classification, storing text and label as instances of the same class seems wrong as they are of different types: <em>text</em> and <em>qualitative</em> (multinomial), in this case: <em>binary</em>.</p>
<p>Beside that, <code>keras</code>'s training is much more concise:</p>
<pre><code class="language-{python}" data-lang="{python}">history = model.fit(train, epochs=3, validation_data=test, validation_steps=30)
</code></pre><p>comparing to <code>pytorch</code>'s:</p>
<pre><code class="language-{python}" data-lang="{python}">epochs = 10
for epoch in range(1, epochs + 1):
    # training
    model.train()
    training_loss = 0.0
    for batch in tqdm(train_iterator):
        optimizer.zero_grad()
        predict = model(batch.body)
        loss = criterion(predict.squeeze(), batch.label.to(torch.float32))
        loss.backward()
        optimizer.step()
        training_loss += loss.data.item() * batch.body.size(0)

    # evaluation on test set
    model.eval()
    test_loss = 0.0
    for batch in tqdm(test_iterator):
        predict = model(batch.body)
        loss = criterion(predict.squeeze(), batch.label.to(torch.float32))
        test_loss += loss.data.item() * batch.body.size(0)
    print(f&quot;Epoch: {epoch}, training loss: {training_loss}, test loss: {test_loss}&quot;)
</code></pre><p>and both of the training methods above do exactly the same&hellip; well, actually <code>model.fit</code> does even more. In this case pytorch seems to be a little bit too low-level, so maybe a good idea would be to use <a href="https://greysweater42.github.io/fastai/">fastai</a>, but still keras is a much more mature framework than fastai, which lacks in-depth documentation, various tutorials, wide community&hellip;</p>
<h3 id="preparing-data">Preparing data</h3>
<p>The easiest way to read any amount of text data into a <code>keras</code> network is to use <code>text_dataset_from_directory</code>, but the data must be stored in a specific format:</p>
<pre><code>.
├── train
│   ├── dog
│   │   ├── 1.txt
│   │   ├── 2.txt
│   │   └── ...
│   └── Python
│       ├── 1.txt
│       ├── 2.txt
│       └── ...
└── test
    ├── dog
    │   ├── 1.txt
    │   ├── 2.txt
    │   └── ...
    └── Python
        ├── 1.txt
        ├── 2.txt
        └── ...
</code></pre><p>The script below transforms csv file into the format above.</p>
<pre><code class="language-{python}" data-lang="{python}">import pandas as pd
import numpy as np
from collections import defaultdict
from pathlib import Path

DATA_PATH = Path(&quot;data&quot;)


def main():
    data = pd.read_csv(&quot;posts_reddit.csv&quot;)
    data[&quot;body&quot;] = data[&quot;body&quot;].str.replace(&quot;dog&quot;, &quot;pet&quot;, case=False)
    data[&quot;body&quot;] = data[&quot;body&quot;].str.replace(&quot;Python&quot;, &quot;pet&quot;, case=False)
    data[&quot;stage&quot;] = np.random.choice([&quot;train&quot;, &quot;test&quot;], len(data), p=[0.8, 0.2])

    nums = dict(train=defaultdict(lambda: 1), test=defaultdict(lambda: 1))
    for _, (body, label, stage) in data.iterrows():
        path = DATA_PATH / stage / label
        path.mkdir(exist_ok=True, parents=True)
        with open(path / f&quot;{nums[stage][label]}.txt&quot;, &quot;w&quot;) as f:
            f.write(body)
        nums[stage][label] += 1


if __name__ == &quot;__main__&quot;:
    main()
</code></pre><p>When the data is ready, we can train the network (for working with GPU check out <a href="https://greysweater42.github.io/keras/#gpu-support">my blog post on keras</a>):</p>
<pre><code class="language-{python}" data-lang="{python}">import numpy as np
import tensorflow as tf
from tensorflow.keras.utils import text_dataset_from_directory
from pathlib import Path

VOCAB_SIZE = 10000
DATA_PATH = Path(&quot;data&quot;)

train = text_dataset_from_directory(
    DATA_PATH / &quot;train&quot;, labels=&quot;inferred&quot;, batch_size=32
)
test = text_dataset_from_directory(DATA_PATH / &quot;test&quot;, labels=&quot;inferred&quot;, batch_size=32)

encoder = tf.keras.layers.TextVectorization(max_tokens=VOCAB_SIZE)
encoder.adapt(train.map(lambda text, label: text))

model = tf.keras.Sequential(
    [
        encoder,
        tf.keras.layers.Embedding(
            input_dim=len(encoder.get_vocabulary()),
            output_dim=300,
            mask_zero=True,
        ),
        tf.keras.layers.LSTM(100),
        tf.keras.layers.Dense(1),
    ]
)
model.compile(
    loss=tf.keras.losses.BinaryCrossentropy(from_logits=True),
    optimizer=tf.keras.optimizers.Adam(1e-4),
    metrics=[&quot;accuracy&quot;],
)
history = model.fit(train, epochs=3, validation_data=test, validation_steps=30)
print(&quot;accuracy: &quot;,  history.history['val_accuracy'][-1])

ls = []
y_hat = []
for texts, labels in test:
    y_hat.append(model.predict(texts).reshape(-1)) 
    ls.append(labels.numpy())

ls = np.concatenate(ls)
y_hat = np.concatenate(y_hat)

from sklearn.metrics import confusion_matrix
print(confusion_matrix(ls, y_hat &gt; 0))
</code></pre><pre><code>accuracy:  0.987500011920929
[[ 347    5]
 [  14 1185]]
</code></pre><p>I&rsquo;m satisfied  with the resulting accuracy of 98.75%, but you can always challenge it using e.g. bidirectional or multilayer LSTM.</p>

</div>

<div class="jumbotron text-center" id="footer">

  made using &emsp;
  <br class="d-xl-none">
  <a href="https://gohugo.io/">Hugo</a> |
  <a href="https://getbootstrap.com/">Bootstrap</a> |
  <a href="https://highlightjs.org/">highlightjs</a> |
  <a href="https://bookdown.org/yihui/blogdown/">blogdown</a> |
  <a href="https://fonts.google.com/">Google fonts</a> &emsp;
  <br class="d-xl-none">
  <a href="https://github.com/greysweater42/cookbook">github</a> |
  <a href="https://pages.github.com/">github pages</a> |
  <br>
  about me: <a href="https://www.linkedin.com/in/tomasz-dyrka-490766127/">LinkedIn</a>

</div>

</body>



<script src="https://greysweater42.github.io/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>


<script src="https://greysweater42.github.io/js/bootstrap-toc.js"></script>


<script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.js" integrity="sha384-9Nhn55MVVN0/4OFx7EE5kpFBPsEMZxKTCnA+4fqDmg12eCTqGi6+BB2LjY8brQxJ" crossorigin="anonymous"></script>

<script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>


<script>
$(window).scroll(function() {
  
  if ($(window).scrollTop() > 100 ) {
    $('.navbar').removeClass('navbar-hide');
    $('.navbar').addClass('navbar-show');
  } else {
    $('.navbar').removeClass('navbar-show');
    $('.navbar').addClass('navbar-hide');
  };   	
});
</script>

</html>

