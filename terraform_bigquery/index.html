<!DOCTYPE html>
<html lang="en">
<head>

  <title>greysweater42&#39;s cookbook</title>
  <link rel="shortcut icon" type='image/x-icon' href="https://greysweater42.github.io/favicon.ico"/> 

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link href="https://fonts.googleapis.com/css?family=Ubuntu&display=swap" rel="stylesheet">        
  <link href="https://fonts.googleapis.com/css?family=Ubuntu+Mono&display=swap" rel="stylesheet">

  <link href="https://fonts.googleapis.com/css?family=Fascinate&display=swap" rel="stylesheet">

  
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">

  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.css" integrity="sha384-yFRtMMDnQtDRO8rLpMIKrtPCD5jdktao2TV19YiZYWMDkUR5GQZR/NOVTdquEx1j" crossorigin="anonymous">
  
  
  <link rel="stylesheet" href="https://greysweater42.github.io/css/bootstrap-toc.css">

  
  <link rel="stylesheet" href="https://greysweater42.github.io/css/darcula.css">

  
  <link rel="stylesheet" href="https://greysweater42.github.io/css/style.css">

  
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-NNMCY8RRGL"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-NNMCY8RRGL');
  </script>

</head>


<body data-spy="scroll" data-target="#toc">



<nav id="navbar" class="navbar navbar-expand-md fixed-top navbar-hide transition">

  
  <a class="navbar-brand"></a>

  <button class="navbar-toggler float-xs-right" data-toggle="collapse" data-target="#collapsibleNavbar">
    Menu
  </button>

  <div class="collapse navbar-collapse" id="collapsibleNavbar">

    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" href="https://greysweater42.github.io">Home</a>
      </li>
      
      
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" data-toggle="dropdown">Python</a>
        <div class="dropdown-menu scrollable-menu">
          
            <a class="dropdown-item" href="https://greysweater42.github.io/airflow/">airflow</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/async_thread/">async/threads</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/beautiful_soup/">beautiful soup</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/decorators/">decorators</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/fastai/">fastai</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/flask/">flask</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/ggplot2/">ggplot2</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/keras/">keras</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/learning_tensorflow/">learning tensorflow</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/logging/">logging</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/pandas/">pandas</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/pillow/">pillow</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/pyenv/">pyenv, virtualenv, freeze</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/pytorch/">pytorch</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/pytorch_basics/">pytorch basics</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/spark/">spark</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/sqlalchemy/">sqlAlchemy</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/tensorflow/">tensorflow</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/testing/">testing</a>
          
        </div>
      </li>
    
      
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" data-toggle="dropdown">R</a>
        <div class="dropdown-menu scrollable-menu">
          
            <a class="dropdown-item" href="https://greysweater42.github.io/cinr/">C in R</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/classess4/">classes - S4</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/data.table/">data.table</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/debugging/">debugging</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/decision_trees/">decision trees</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/ggplot2/">ggplot2</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/logging/">logging</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/lubridate/">lubridate</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/nls/">nls</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/packages/">packages</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/rcpp/">Rcpp</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/reshape2/">reshape2</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/rmariadb/">RMariaDB (former RMySQL)</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/rocker/">rocker</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/rstanarm/">rstanarm</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/rtags/">rTags</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/shiny/">shiny</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/spark/">spark</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/sqldf/">sqldf</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/testing/">testing</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/tidyverse/">tidyverse</a>
          
        </div>
      </li>
    
      
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" data-toggle="dropdown">Machine learning</a>
        <div class="dropdown-menu scrollable-menu">
          
            <a class="dropdown-item" href="https://greysweater42.github.io/ml/">basic machine learning algorithms</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/bayes/">bayes</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/bias_variance/">bias/variance trade-off</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/cnns/">CNNs</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/decision_trees/">decision trees</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/fastai/">fastai</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/fourier/">Fourier transform</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/keras/">keras</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/learning_tensorflow/">learning tensorflow</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/validation/">model validation</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/nlp/">nlp</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/nls/">nls</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/pca/">PCA / SVD</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/pillow/">pillow</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/pytorch/">pytorch</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/pytorch_basics/">pytorch basics</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/tensorflow/">tensorflow</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/useful_processing/">useful processing</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/xai/">XAI</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/xgboost/">xgboost</a>
          
        </div>
      </li>
    
      
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" data-toggle="dropdown">Data engineering</a>
        <div class="dropdown-menu scrollable-menu">
          
            <a class="dropdown-item" href="https://greysweater42.github.io/airflow/">airflow</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/airflow_bigquery/">airflow &#43; BigQuery</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/async_thread/">async/threads</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/hadoop/">hadoop</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/logging/">logging</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/pandas/">pandas</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/rabbimtmq/">RabbimtMQ</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/spark/">spark</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/terraform_bigquery/">terraform &#43; bigquery</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/useful_processing/">useful processing</a>
          
        </div>
      </li>
    
      
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" data-toggle="dropdown">DevOps</a>
        <div class="dropdown-menu scrollable-menu">
          
            <a class="dropdown-item" href="https://greysweater42.github.io/bash/">bash</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/docker/">docker</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/docker_compose_boilerplate/">docker-compose biolerplate</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/flask/">flask</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/git/">git</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/heroku/">heroku</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/kubernetes/">Kubernetes</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/mesos/">mesos</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/pyenv/">pyenv, virtualenv, freeze</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/rocker/">rocker</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/terraform_bigquery/">terraform &#43; bigquery</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/terraform_ec2_vpc/">terraform &#43; EC2 &#43; VPC</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/vagrant/">vagrant</a>
          
        </div>
      </li>
    
      
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" data-toggle="dropdown">Projects</a>
        <div class="dropdown-menu scrollable-menu">
          
            <a class="dropdown-item" href="https://greysweater42.github.io/fiat_ferrari/">fiat 126 v ferrari</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/finance_nn/">neural networks vs stock market</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/reading_mate/">reading mate</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/vim_vs_emacs/">vim vs emacs - text mining to settle the editor war</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/cookbook/">writing a cookbook</a>
          
        </div>
      </li>
    
      
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" data-toggle="dropdown">scratchpad</a>
        <div class="dropdown-menu scrollable-menu">
          
            <a class="dropdown-item" href="https://greysweater42.github.io/passing_arguments/">passing arguments to scripts</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/redis/">redis</a>
          
            <a class="dropdown-item" href="https://greysweater42.github.io/tensorflow_serving/">tensorflow_serving</a>
          
        </div>
      </li>
    
    </ul>

  </div>  

</nav>



<div class="jumbotron text-center" id="header">

  <div id="header-title">
      <a href="https://greysweater42.github.io">greysweater42&#39;s cookbook</a>
  </div>

  <p style="color: white;">data science tutorials and snippets prepared by greysweater42</p> 

</div>


<nav id="toc" data-toggle="toc" class="sticky-top d-none d-xl-block"></nav>

<div class="article">

<div class="article-categories">
  
    <object style="vertical-align:middle" type="image/svg+xml" data="/folder.svg" height="15px" width="15px"></object> 
    <a href="https://greysweater42.github.io/categories/devops" role="button">DevOps </a>
    &emsp;
  
    <object style="vertical-align:middle" type="image/svg+xml" data="/folder.svg" height="15px" width="15px"></object> 
    <a href="https://greysweater42.github.io/categories/data-engineering" role="button">Data engineering </a>
    &emsp;
  </br>
</div>
<div class="article-title">
  
  terraform &#43; bigquery

</div>
<div class="article-info">
    May 13, 2024 &emsp;  &emsp; 4 minutes read
</div>

<h2 id="why-would-you-use-terraform-in-data-engineering">Why would you use <code>terraform</code> in data engineering?</h2>
<p><code>terraform</code> is a standard in industry for setting up cloud infrastructure. You might wonder, just as I do, whether you should store your DDLs in <code>terraform</code>: it certainly is possible, but there are some drawbacks, e.g. how to handle database schema migrations? And how does it cooperate with other tools, like <a href="(https://greysweater42.github.io/airflow/)">Apache Airflow</a>? Surely there are interesing alternatives, like <a href="https://www.getdbt.com/">dbt</a> or <a href="https://cloud.google.com/dataform?hl=pl">dataform</a>.</p>
<p>In this article I will not judge whether <code>terraform</code> is a good choice for your particular use case. But it could be.</p>
<h2 id="prerequisites">Prerequisites</h2>
<h4 id="gcp-project">GCP project</h4>
<p>A &ldquo;project&rdquo; is GCP&rsquo;s abstraction to group resources and it has one billing account (one debit card attached). In GCP you always work inside of a project, so we need to create one. It is very simple: go to the GCP Console, type &ldquo;projects&rdquo; into the search bar, choose &ldquo;Create a project&rdquo;, provide its name and click &ldquo;Create&rdquo;.</p>
<p>For this tutorial I created a project named <code>bigquery-tutorial</code>.</p>
<p><em>Theoretically we could create project from terraform, but you usually set up payment methods manually, because you do not change them ever after programatically. It&rsquo;s not developer&rsquo;s job.</em></p>
<h4 id="gcloud">gcloud</h4>
<p>GCP provides a nice CLI for working with its services: <code>gcloud</code>, and terraform uses it to provision infrastructure. In order to install it, follow <a href="https://cloud.google.com/sdk/docs/install">these</a> instructions.</p>
<p>After the installation you need to log in to your Google account with <code>gcloud auth login</code>. You might also need to run <code>gcloud auth application-default login</code>, and <code>gcloud auth application-default set-quota-project bigquery-tutorial</code>.</p>
<h2 id="terraform-config">terraform config</h2>
<h4 id="setup">setup</h4>
<p><em>For primer on <code>terraform</code>, please refer to <a href="https://greysweater42.github.io/terraform_ec2_vpc/#terraform-primer">this article</a></em></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-terraform" data-lang="terraform"><span style="color:#960050;background-color:#1e0010">terraform</span> {
  <span style="color:#960050;background-color:#1e0010">required_providers</span> {
<span style="color:#a6e22e">    google</span> <span style="color:#f92672">=</span> {
<span style="color:#a6e22e">      source</span>  <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;hashicorp/google&#34;</span>
<span style="color:#a6e22e">      version</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;4.51.0&#34;</span>
    }
  }
}

<span style="color:#960050;background-color:#1e0010">locals</span> {
<span style="color:#a6e22e">  region</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;EUROPE-CENTRAL2&#34;</span>
}

<span style="color:#66d9ef">provider</span> <span style="color:#e6db74">&#34;google&#34;</span> {
<span style="color:#a6e22e">  project</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;bigquery-tutorial-&lt;id&gt;&#34;</span>
<span style="color:#a6e22e">  region</span>  <span style="color:#f92672">=</span> <span style="color:#960050;background-color:#1e0010">local</span>.<span style="color:#960050;background-color:#1e0010">region</span>
}
</code></pre></div><p>For this tutorial I chose Europe-central2 region (Warsaw, Poland), because this is where I live. After running <code>terraform init</code> terraform installs plugins that it needs to work with GCP.</p>
<h4 id="bucket">bucket</h4>
<p>Creating a bucket is very simple:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-terraform" data-lang="terraform"><span style="color:#66d9ef">resource</span> <span style="color:#e6db74">&#34;google_storage_bucket&#34; &#34;bucket&#34;</span> {
<span style="color:#a6e22e">  name</span>          <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;some-bucket&#34;</span>
<span style="color:#a6e22e">  location</span>      <span style="color:#f92672">=</span> <span style="color:#960050;background-color:#1e0010">local</span>.<span style="color:#960050;background-color:#1e0010">region</span><span style="color:#75715e">  # one-region bucket
</span><span style="color:#75715e"></span><span style="color:#a6e22e">  force_destroy</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>

<span style="color:#a6e22e">  public_access_prevention</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;enforced&#34;</span>
}
</code></pre></div><p>You might notice some interesting config options here:</p>
<ul>
<li><code>location</code> - buckets on GCP are usually replicated across multiple regions for additional reliability and efficiency. In this case, since it&rsquo;s an example, we use a single region</li>
<li><code>force_destroy</code> - if bucket is not empty, <code>terraform</code> will recreate/destroy it anyway. This is not a default behavior.</li>
<li><code>public_access_prevention</code> - normally you don&rsquo;t want the bucket to be accessible from the internet, unless you host a static webpage. Public access prevention can be set either to <code>inherited</code>, whre it inherits this setting from organization&rsquo;s policy, or <code>forced</code>, where it overrides organization&rsquo;s policy and prevents the access.</li>
</ul>
<p>For further options you might want to refer to the <a href="https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/storage_bucket">documentation</a>, among which are:</p>
<ul>
<li>multi-region (us / eu / asia) / dual-region / region</li>
<li>storage class (standard, nearline, coldline, archive)</li>
<li>access control - uniform / fine-grained</li>
<li>data protection (soft delete, object versioning, retention)</li>
<li>encryption (google managed, CMEK)</li>
</ul>
<h2 id="bigquery">BigQuery</h2>
<p><code>terraform</code> allows you to create BigQuery datasets and tables:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-terraform" data-lang="terraform"><span style="color:#66d9ef">resource</span> <span style="color:#e6db74">&#34;google_bigquery_dataset&#34; &#34;default&#34;</span> {
<span style="color:#a6e22e">  dataset_id</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;cars_per_year&#34;</span>
<span style="color:#a6e22e">  location</span> <span style="color:#f92672">=</span> <span style="color:#960050;background-color:#1e0010">local</span>.<span style="color:#960050;background-color:#1e0010">region</span><span style="color:#75715e">  # one-region dataset
</span><span style="color:#75715e"></span>}

<span style="color:#66d9ef">resource</span> <span style="color:#e6db74">&#34;google_bigquery_table&#34; &#34;default&#34;</span> {
<span style="color:#a6e22e">  dataset_id</span> <span style="color:#f92672">=</span> <span style="color:#960050;background-color:#1e0010">google_bigquery_dataset</span>.<span style="color:#66d9ef">default</span>.<span style="color:#960050;background-color:#1e0010">dataset_id</span>
<span style="color:#a6e22e">  table_id</span>   <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;cars&#34;</span>
<span style="color:#a6e22e">  schema</span> <span style="color:#f92672">=</span> <span style="color:#960050;background-color:#1e0010">file</span>(<span style="color:#e6db74">&#34;./cars_schema.json&#34;</span>)<span style="color:#75715e">
</span><span style="color:#75715e">  # we want to be able to recreate this table anytime we modify its config
</span><span style="color:#75715e"></span><span style="color:#a6e22e">  deletion_protection</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span>

  <span style="color:#960050;background-color:#1e0010">external_data_configuration</span> {
<span style="color:#a6e22e">    autodetect</span>    <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span>
<span style="color:#a6e22e">    source_format</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;CSV&#34;</span>

    <span style="color:#960050;background-color:#1e0010">csv_options</span> {
<span style="color:#a6e22e">        quote</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;\&#34;&#34;</span>  
        <span style="color:#a6e22e">skip_leading_rows</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span><span style="color:#75715e">  # skips header
</span><span style="color:#75715e"></span>    }

<span style="color:#a6e22e">    source_uris</span> <span style="color:#f92672">=</span> [
      <span style="color:#e6db74">&#34;${google_storage_bucket.bucket.url}/*.csv&#34;</span>,
    ]
  }

<span style="color:#a6e22e">  depends_on</span> <span style="color:#f92672">=</span> [
    <span style="color:#960050;background-color:#1e0010">google_bigquery_dataset</span>.<span style="color:#66d9ef">default</span>,
  ]
}
</code></pre></div><p>where we read tables schema from a <code>cars_schema.json</code> file:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">[
  {
    <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;year&#34;</span>,
    <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;integer&#34;</span>
  },
  {
    <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;make&#34;</span>,
    <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;STRING&#34;</span>
  },
  {
    <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;model&#34;</span>,
    <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;STRING&#34;</span>
  },
  {
    <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;body_styles&#34;</span>,
    <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;STRING&#34;</span>
  }
]
</code></pre></div><h2 id="why-terraform-might-be-not-the-best-choice-for-bigquery">Why <code>terraform</code> might be not the best choice for BigQuery?</h2>
<ul>
<li>terraform creates buckets, datasets, and tables without any regard to the data. It is a little bit too easy to delete data</li>
<li>you might want to keep your DDLs next to data processing pipelines, which enables you to use CTAS (<code>create table ... as ...</code>) syntax. Besides, whenever you modify a pipeline, you might modify a table and it is easier to do that with one tool (e.g. <code>dbt</code>)</li>
<li>you might want to create buckets and datasets with <code>terraform</code>, but tables with some other tool</li>
</ul>

</div>

<div class="jumbotron text-center" id="footer">

  made using &emsp;
  <br class="d-xl-none">
  <a href="https://gohugo.io/">Hugo</a> |
  <a href="https://getbootstrap.com/">Bootstrap</a> |
  <a href="https://highlightjs.org/">highlightjs</a> |
  <a href="https://bookdown.org/yihui/blogdown/">blogdown</a> |
  <a href="https://fonts.google.com/">Google fonts</a> &emsp;
  <br class="d-xl-none">
  <a href="https://github.com/greysweater42/cookbook">github</a> |
  <a href="https://pages.github.com/">github pages</a> |
  <br>
  about me: <a href="https://www.linkedin.com/in/tomasz-dyrka-490766127/">LinkedIn</a>

</div>

</body>



<script src="https://greysweater42.github.io/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>


<script src="https://greysweater42.github.io/js/bootstrap-toc.js"></script>


<script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.js" integrity="sha384-9Nhn55MVVN0/4OFx7EE5kpFBPsEMZxKTCnA+4fqDmg12eCTqGi6+BB2LjY8brQxJ" crossorigin="anonymous"></script>

<script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>


<script>
$(window).scroll(function() {
  
  if ($(window).scrollTop() > 100 ) {
    $('.navbar').removeClass('navbar-hide');
    $('.navbar').addClass('navbar-show');
  } else {
    $('.navbar').removeClass('navbar-show');
    $('.navbar').addClass('navbar-hide');
  };   	
});
</script>

</html>

